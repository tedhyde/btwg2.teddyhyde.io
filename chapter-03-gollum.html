<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<title>GitHub Wikis with Gollum</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove the comments around the @import statement below when using this as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
#map_canvas img,#map_canvas embed,#map_canvas object,.map_canvas img,.map_canvas embed,.map_canvas object{max-width:none!important}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
.antialiased,body{-webkit-font-smoothing:antialiased}
img{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{display:inline-block;color:rgba(0,0,0,.8);font-size:.75em;line-height:1.4;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:-.15em .15em 0 .15em;padding:.2em .6em .2em .5em;vertical-align:middle;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.05em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.spread{width:100%}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1{padding-right:.75em;font-weight:bold}
td.hdlist1,td.hdlist2{vertical-align:top}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none}
span.footnote,span.footnoteref{vertical-align:super;font-size:.875em}
span.footnote a,span.footnoteref a{text-decoration:none}
span.footnote a:active,span.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em;line-height:1.3;font-size:.875em;margin-left:1.2em;text-indent:-1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
h1,h2{letter-spacing:-.01em}
dt,th.tableblock,td.content{text-rendering:optimizeLegibility}
p,td.content{letter-spacing:-.01em}
p strong,td.content strong{letter-spacing:-.005em}
p,blockquote,dt,td.content{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img{page-break-inside:avoid}
thead{display:table-header-group}
img{max-width:100%!important}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<script src="https://unpkg.com/micromodal/dist/micromodal.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.5.3/firebase.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.5.3/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.5.3/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.5.3/firebase-auth.js"></script>
<script src="edit.js"></script>
<link rel="stylesheet" type="text/css" href="fab.css">
<link rel="stylesheet" type="text/css" href="micromodal.css">
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="_github_wikis_with_gollum">GitHub Wikis with Gollum</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Wikis have revolutionized the way we create and digest
information. It turns out they are a great complement to technical
projects (code repositories) because they allow non-technical
users to contribute in ways other than adding code. Gollum
is an open source wiki created by GitHub. Just as Git has
revolutionized collaborative editing of code, Gollum wikis layer the
benefits of Git onto the widely used Wiki publishing workflow. Gollum
wikis are themselves repositories that generally annotate other
typically code-centric repositories. GitHub makes it easy to associate
a wiki with any
repository.</p>
</div>
<div class="paragraph">
<p>In this chapter we&#8217;ll explore the basics of using Gollum, creating a
wiki on GitHub and then understanding how to edit it on GitHub, and as
a repository on our local machine. We will then create a Gollum wiki by
hand from the command line, and show the bare minimum set of files to
call something a Gollum repository. Finally, we will build a simple
image organization tool which allows us to edit a Gollum wiki in an
entirely different way, but still publishes information into GitHub as
a regular Gollum wiki, exploring a little bit of the internals of Git
along the way.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This chapter demonstrates code which modifies a Git repository
programmatically. You will be able to follow along without possessing
a deep understanding of the internals of Git. And, a good supplement
to this chapter (and later chapters as well) is the
<a href="http://shop.oreilly.com/product/0636920022862.do">"Version Control
with Git"</a> book from O&#8217;Reilly.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="__the_story_of_smeagol">"The Story of Smeagol&#8230;&#8203;"</h3>
<div class="paragraph">
<p>At its most basic form, a Gollum wiki is a Git repository with a single file,
<code>Home.ext</code> (<code>ext</code> would be any of the supported wiki markup formats,
which we will talk about later).</p>
</div>
<div class="sect3">
<h4 id="_repository_linked_wikis">Repository Linked Wikis</h4>
<div class="paragraph">
<p>Any repository on GitHub, public or private, can have an associated Gollum wiki.
To create a wiki linked to your repository, visit the repository
page and then look in the rightmost colum. You&#8217;ll see an icon which
looks like a book, next to which will be the word "Wiki."</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/gollum-wiki.png" alt="Integrated Gollum Wiki in the Sidebar">
</div>
</div>
<div class="paragraph">
<p>Clicking on this link will bring you to a page where you are asked to
create a wiki for the first time. GitHub will ask you to create the
"Home" page, which is the starting point in a Gollum wiki. GitHub will
automatically create a page template with the project name; you can
customize this information to suit your own needs. Clicking on the
"Save Page" will save your first page and create the wiki for you.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/gollum-wiki-create.png" alt="Starting a Gollum Wiki">
</div>
</div>
<div class="paragraph">
<p>Your wiki is now as public as your repository is public. Public
repositories have public wikis, accessible to anyone. Private
repositories have private wikis, accessible only to those users or
organizations which have rights to edit the repository data.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s review the markup options for Gollum wikis now.</p>
</div>
</div>
<div class="sect3">
<h4 id="_markup_and_structure">Markup and Structure</h4>
<div class="paragraph">
<p>Gollum files can be written in any of the supported "Github Markup" formats, which
includes ASCIIdoc, Creole, Markdown, Org Mode, Pod, RDoc,
ReStructuredText, Textile, and MediaWiki. The variety of markup
languages brings flexibility but it can be confusing to know which one
to use. Markdown (and its variant cousins) is the most popular markup
language on GitHub, and is well liked on other popular sites like
Stack Overflow. If you are unsure which language to use, Markdown is a
safe bet because it is ubiquitous across GitHub. The <a href="#Jekyll">[Jekyll]</a>
chapter has a much deeper overview of Markdown.</p>
</div>
<div class="paragraph">
<p>If you do choose Markdown, In addition to the standard vanilla
Markdown language tags, Gollum adds its own set wiki specific tags. There
are often subtle (or conflicting) differences from other Wiki markup
so it is worth reviewing the
<a href="https://github.com/gollum/gollum/wiki">Gollum repository documentation
page</a>. We&#8217;ll go over the most important ones here.</p>
</div>
<div class="sect4">
<h5 id="_links">Links</h5>
<div class="paragraph">
<p>Links obviously convert into the <code>&lt;a&gt;</code> HTML tag. Each format has its
own linking format: in Markdown you use <code>[text](URL)</code>. Gollum adds its
own link tag: <code><a id="Link"></a></code>.</p>
</div>
<div class="paragraph">
<p>In addition:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You can add a link title using the bar character:
<code>[[<a href="http://foobar.com|A" class="bare">http://foobar.com|A</a> link to foobar]]</code>.</p>
</li>
<li>
<p>Links can be either external or internal links.</p>
</li>
<li>
<p>A link like <code>[[Review Images]]</code> will be converted to a relative link
to the page <code>review-images.ext</code> (where ext is the preferred
extension you are using with your wiki, most likely Markdown).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Wikis are generally a collection of pages
linked together in myriad ways, and this assumption about the
structure of links makes writing pages easier.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
As we mentioned, there are differences between Gollum wiki tags and other wikis despite
having similar syntax. One such example is MediaWiki, where links with
titles use the opposite ordering <code>[[A link to
foobar|http://foobar.com]]</code>, so caveat emptor.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_code_snippets">Code Snippets</h5>
<div class="paragraph">
<p>Gollum (the wiki) was invented at GitHub, a company dedicated to
improving the lives of software developers, so it stands to reason
Gollum wikis would support insertion of code snippets. To include a snippet of
code, use three backticks, followed by an optional language name, and close
the block of code using three more backticks. If you use the language
name, Gollum will do proper syntax highlighting for most languages.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">```ruby
def hello
  puts "hello"
end
```</code></pre>
</div>
</div>
<div class="paragraph">
<p>Gollum
<a href="https://github.com/gollum/gollum/wiki/Home/b16ce34e46e26600dc77bdf9b5aa6efcaf42026d#github-syntax-highlighting">at
one point</a> supported inclusion of files from any GitHub repository
(and any branch!) using a syntax like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">```ruby:github:xrd/TeddyHyde/blob/master/Gemfile```</code></pre>
</div>
</div>
<div class="paragraph">
<p>Unforunately, this no longer works. According to current documentation
on for Gollum, this tag allows inclusion of files from the parent
repository:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">```ruby:/lib/gollum/app.rb```</code></pre>
</div>
</div>
<div class="paragraph">
<p>But, I found this to be broken as well. At the time of this writing,
it tragically appears there is no way to insert code from the parent
repository (or any other repository) into your Wiki content.</p>
</div>
</div>
<div class="sect4">
<h5 id="_structural_components">Structural Components</h5>
<div class="paragraph">
<p>Gollum includes capabilities to add sidebars, headers, and footers. If
you include a file called <code>_Sidebar.ext</code> inside your repository,
you&#8217;ll see it as a sidebar for every file rendered. Sidebars are
automatically added to any file and any file from subdirectories that
do not have their own sidebar files. If you wanted to add sidebars
specific to a subdirectory, add another sidebar file in the
subdirectory and this file will override the top level sidebar file.</p>
</div>
</div>
<div class="sect4">
<h5 id="_no_styling_or_javascript">No Styling or JavaScript</h5>
<div class="paragraph">
<p>For security reasons, Gollum strips out all CSS and
JavaScript from raw markup files. You can include your own JavaScript
or CSS file when running Gollum from the command line,
(discussed momentarilys) using the <code>--custom-css</code> or
<code>--custom-js</code> switches, but there is no way to include these files on a
Wiki when your Gollum wiki is hosted on GitHub.</p>
</div>
</div>
<div class="sect4">
<h5 id="_inserting_images">Inserting Images</h5>
<div class="paragraph">
<p>Images are inserted into your document using the same tag format
<code><a id="ceo.png"></a></code>: this adds the correct HTML tags to include an image
named ceo.png inside your page. This basic syntax is often extended
for additional funtionality. For example, to add a frame
and an alt tag, you could use syntax like <code>[[ceo.png|frame|alt=Our CEO
relaxing on the beach]]</code>. This creates the proper HTML tags for the
same image, and also adds a frame and alt text (helpful for better
context and the extra information is used by screenreaders for
visually impaired users as well).  Review the documentation on the
Gollum repository for more details about the breadth of the image
options.</p>
</div>
<div class="paragraph">
<p>You can also add images using the editor on GitHub. But, you&#8217;ll notice
that either way you are adding a link to an image and that there is no
way to upload images into GitHub from the editor.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/gollum-image-url.png" alt="No image upload" width="only image URLs">
</div>
</div>
<div class="paragraph">
<p>For non-technical users, this makes Gollum Wikis on GitHub almost
unusable if they need to add images. Let&#8217;s address this problem by
building our own customized image-centric Gollum editor that still
interoperates with regular Gollum Wikis. We can put this editor in
front of non-technical users allowing them to add images, and then
publish the wiki into GitHub as-is.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_hacking_gollum">Hacking Gollum</h3>
<div class="paragraph">
<p>Would an image editor based on Gollum be of general use? On many
software teams there is a tension between the design
team and the software team stemming from the fact that designers
generally don&#8217;t like using source code tools to manage images. This
causes issues when software developers rely on designs that are
rapidly changing: coders quickly get out of sync with the latest
designs. As a wiki, Gollum is the perfect tool to bridge this gap
between designers and coders: wikis are easy to read and modify by
non-technical users. Since Gollum is a hackable Wiki, we can build our
own workflow tool that allows designers to manage images and coders to
easily see those changes in a source code repository.</p>
</div>
<div class="paragraph">
<p>This will be a dual purpose repository. We can use the repository with
gollum as a standard wiki. And, we can use it with our application to
enter data in a more powerful way than gollum permits from its default
interface. The data will still be compatible with gollum and will be
hosted on GitHub.</p>
</div>
<div class="paragraph">
<p>To begin, install the Gollum ruby gem and then initialize our repository.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ gem install gollum
$ mkdir images
$ cd images
$ git init .
$ printf "### Our home" &gt; Home.md
$ git add Home.md
$ git commit -m "Initial commit"</code></pre>
</div>
</div>
<div class="paragraph">
<p>We&#8217;ve just created a wiki compatible with gollum. Let&#8217;s see what it
looks like inside gollum. run the <code>gollum</code> command then open
<code><a href="http://localhost:4567/" class="bare">http://localhost:4567/</a></code> in your browser.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/gollum-first-view.png" alt="Gollum running locally">
</div>
</div>
<div class="paragraph">
<p>As you can see, this tiny set of commands was enough to create the
basics of the gollum wiki structure.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
If you edit a Gollum wiki from the command line, be aware that Gollum
only looks inside the repository data for files. If you have added
something to the working directory or have not yet commited files in
your index, they will not be visible to Gollum.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now let&#8217;s begin creating the web app that will help us store images
inside a Gollum wiki.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_starting_point_of_a_gollum_editor">The Starting Point of a Gollum Editor</h3>
<div class="paragraph">
<p>Now we will create our custom editor. We&#8217;ll use Sinatra, a Ruby
library that provides a simple DSL (domain specific language) for
building web applications. First, create a file called <code>image.rb</code> and
put the following contents inside it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">require 'sinatra'
require 'gollum-lib'
wiki = Gollum::Wiki.new(".")
get '/pages' do
  "All pages: \n" + wiki.pages.collect { |p| p.path }.join( "\n" )
end</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, create the Gemfile, install the dependencies and run the web
application.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ echo "source 'https://rubygems.org'
gem 'sinatra', '1.4.5'
gem 'gollum-lib', '4.1.0'" &gt;&gt; Gemfile
$ bundle install
Fetching gem metadata from https://rubygems.org/..........
Resolving dependencies...
Installing charlock_holmes (0.7.3)
Using diff-lcs (1.2.5)
Installing github-markup (1.3.3)
Using mime-types (1.25.1)
...
$ bundle exec ruby image.rb
$ open http://localhost:4567/pages</code></pre>
</div>
</div>
<div class="paragraph">
<p>We specify at least the minimum 4.1.0 for <code>gollum-lib</code> as the interface
and list of supporting libraries has changed. We then run within the
bundler context (using gems installed from this Gemfile rather than
system gems) using the <code>bundle exec ruby image.rb</code> command.</p>
</div>
<div class="paragraph">
<p>You&#8217;ll see a report of the files that exist in our Gollum wiki right
now. We&#8217;ve only added one file, the <code>Home.md</code> file.</p>
</div>
</div>
<div class="sect2">
<h3 id="_programmatically_handling_images">Programmatically Handling Images</h3>
<div class="paragraph">
<p>Let&#8217;s add to our server. We want to support uploading ZIP files into
our system that we will then unpack and add to our repository, as well
as adding a list of these files to our wiki. Modify our <code>image.rb</code>
script to look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">require 'sinatra'
require 'gollum-lib'
require 'tempfile'
require 'zip'
require 'rugged'

def index( message=nil )
  response = File.read(File.join('.', 'index.html'))
  response.gsub!( "&lt;!-- message --&gt;\n", "&lt;h2&gt;Received and unpacked #{message}&lt;/h2&gt;" ) if message
  response
end

wiki = Gollum::Wiki.new(".")
get '/' do
  index()
end

post '/unpack' do
  @repo = Rugged::Repository.new('.')
  @index = Rugged::Index.new

  zip = params[:zip][:tempfile]
  Zip::Zip.open( zip ) { |zipfile|
    zipfile.each do |f|
      contents = zipfile.read( f.name )
      filename = f.name.split( File::SEPARATOR ).pop
      if contents and filename and filename =~ /(png|jp?g|gif)$/i
        puts "Writing out: #{filename}"
      end
    end
  }
  index( params[:zip][:filename] )
end</code></pre>
</div>
</div>
<div class="paragraph">
<p>We&#8217;ll need an <code>index.html</code> file as well, so add that.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">&lt;html&gt;
&lt;body&gt;
&lt;!-- message --&gt;
&lt;form method='POST' enctype='multipart/form-data' action='/unpack'&gt;
Choose a zip file:
&lt;input type='file' name='zip'/&gt;
&lt;input type='submit' name='submit'&gt;
&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This server script receives a POST request at the <code>/unpack</code> mount point and
retrieves a ZIP file from the parameters passed into the script. It
then opens the ZIP file (stored as a temp file on the server side),
iterates over each file in the ZIP, strips the full path from the
filename, and then prints out that filename (if it looks like an image)
to our console. Regardless of whether we are accessing the
root of our server, or have just posted to the <code>/unpack</code> mount point,
we always need to render our index page. When we do render it after
unzipping, we replace a comment stored in the index file with a status
message indicating the script received the correct file we posted.</p>
</div>
<div class="paragraph">
<p>We need to add the new Ruby libraries (RubyZip and Rugged) to our Gemfile:
update the required gems using the following commands, and then re-run
our Sinatra server script.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ echo "gem 'rubyzip', '1.1.7'
gem 'rugged', '0.23.2'" &gt;&gt; Gemfile
$ bundle install
$ bundle exec ruby image.rb</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Rugged requires the libgit2 libraries (the pure C libraries for accessing
Git repositories). Rugged gives you access to modification of Git
repositories in the elegance of the Ruby language but with the speed
of C. However, as this library is based on libgit2, and libgit2
requires a C compiler, you will need to install this toolset first to
install Rugged. On OSX this can look like <code>brew install cmake</code> or
<code>apt-get install cmake</code> for Linux.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Then, we can open <code><a href="http://localhost:4567/" class="bare">http://localhost:4567/</a></code> and test uploading a zip file
full of images. You&#8217;ll see output similar to this in your console
after uploading a zip file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">...
[2014-05-07 10:08:49] INFO  WEBrick 1.3.1
[2014-05-07 10:08:49] INFO  ruby 2.0.0 (2013-05-14)
[x86_64-darwin13.0.0]
== Sinatra/1.4.5 has taken the stage on 4567 for development with
backup from WEBrick
[2014-05-07 10:08:49] INFO  WEBrick::HTTPServer#start: pid=46370
port=4567
Writing out: IMG1234.png
Writing out: IMG5678.png
Writing out: IMG5678.png
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>We are not doing anything beyond printing out the names of the images
in the zip. We&#8217;ll actually insert them into our Git repository in the
next section.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_the_rugged_library">Using the Rugged Library</h3>
<div class="paragraph">
<p>Our end goal for this script is to add files to our Gollum wiki, which
means adding files to the repository which backs our Gollum wiki.
The Rugged library handles the grunt work of this type of task easily.
Rugged is the successor to the original Ruby library for Git (called
Grit). Gollum, at the time of this writing uses the Grit libraries,
which also provide a binding to the libgit2 library, a "portable, pure
C implementation of the Git core methods." Grit has been abandoned
(though there are unofficial maintainers) and the Gollum team intends
to use Rugged as the long term library backing Gollum. Rugged is
written in Ruby and (provided you like Ruby) is a more
elegant way to interface with a Git repository than raw git
commands. As you might expect, Rugged is maintained by several employees of GitHub.</p>
</div>
<div class="paragraph">
<p>To change our script to modify our Git repository, let&#8217;s change our
script to no longer print the filename (using the <code>puts</code> method inside
the zip decode block) and instead call a new method called
<code>write_file_to_repo</code>. And, at the end of the zip block, add a method
called <code>build_commit</code> which builds the commit from our new files. Our
new file (omitting the unchanged code at the head of the file) looks
like this.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">post '/unpack' do
  @repo = Rugged::Repository.new('.')
  @index = Rugged::Index.new

  zip = params[:zip][:tempfile]
  Zip::Zip.open( zip ) { |zipfile|
    zipfile.each do |f|
      contents = zipfile.read( f.name )
      filename = f.name.split( File::SEPARATOR ).pop
      if contents and filename and filename =~ /(png|jp?g|gif)$/i
        write_file_to_repo contents, filename # Write the file
      end
    end
    build_commit() # Build a commit from the new files
  }
  index( params[:zip][:filename] )
end

def get_credentials
  contents = File.read File.join( ENV['HOME'], ".gitconfig" )
  @email = $1 if contents =~ /email = (.+)$/
  @name = $1 if contents =~ /name = (.+)$/
end

def build_commit
  get_credentials()
  options = {}
  options[:tree] = @index.write_tree(@repo)
  options[:author] = { :email =&gt; @email, :name =&gt; @name, :time =&gt; Time.now }
  options[:committer] = { :email =&gt; @email, :name =&gt; @name, :time =&gt; Time.now }
  options[:message] ||= "Adding new images"
  options[:parents] = @repo.empty? ? [] : [ @repo.head.target ].compact
  options[:update_ref] = 'HEAD'

  Rugged::Commit.create(@repo, options)

end

def write_file_to_repo( contents, filename )
  oid = @repo.write( contents, :blob )
  @index.add(:path =&gt; filename, :oid =&gt; oid, :mode =&gt; 0100644)
end</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see from the code above, Rugged handles a lot of the grunt
work required when creating a commit inside a Git repository. Rugged has a
simple interface to creating a blob inside your Git repository
(<code>write</code>), adding files to the index (the <code>add</code> method), and
then has a simple and clean interface to build the tree object
(<code>write_tree</code>) and then build the commit (<code>Rugged::Commit.create</code>).</p>
</div>
<div class="paragraph">
<p>To ease the burden of hard coding our commit credentials, we implement
a method called <code>get_credentials</code> that loads up your credentials from
a file located in your home directory called <code>.gitconfig</code>. You
probably have this if you have used Git for anything at all on your machine, but if this
file is missing, this method will fail. On my machine this file looks
like the following code snippet. The <code>get_credentials</code> method simply loads up this
file and parses it for the name and email address. If you wanted to
load the credentials using another method, or even hard code them, you
can just modify this method to suit your needs. The instance variables
<code>@email</code> and <code>@name</code> are then used in the <code>build_commit()</code> method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ini" data-lang="ini">[user]
        name = Chris Dawson
        email = xrdawson@gmail.com
[credential]
        helper = cache --timeout=3600
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Just to double check that everything worked properly, let&#8217;s verify
that things are working correctly after uploading a ZIP file. Jumping
into a terminal window after uploading a new file, imagine running
these commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ git status</code></pre>
</div>
</div>
<div class="paragraph">
<p>To our surprise, we will see something like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ git status
On branch master
Changes to be committed:
  (use "git reset HEAD &lt;file&gt;..." to unstage)

  deleted:    images/3190a7759f7f6688b5e08526301e14d115292a6e/IMG_20120825_164703.jpg
  deleted:    images/3190a7759f7f6688b5e08526301e14d115292a6e/IMG_20130704_151522.jpg
  deleted:    images/3190a7759f7f6688b5e08526301e14d115292a6e/IMG_20130704_174217.jpg</code></pre>
</div>
</div>
<div class="paragraph">
<p>We just added those files; why is Git reporting them as deleted?</p>
</div>
<div class="paragraph">
<p>To understand why this happens, remember that in Git there are three
places where files can reside: the working directory, the staging
area or index, and the repository itself. Your working directory is
the set of local files which you are working on. The <code>git status</code>
command describes itself as "show the working tree status." Rugged
operates on the repository itself, and our Rugged calls above operated
on the index and then built a commit. This is important to note
because our files will not exist in our working directory if we only
write them using the Rugged calls, and if we do this, we cannot
reference them inside our wiki page when we are running Gollum
locally. We&#8217;ll fix this in the next section.</p>
</div>
<div class="paragraph">
<p>We&#8217;ve now added the files to our repository, but we have not exposed
these files inside our wiki. Let&#8217;s modify our server script to write
out each file to a wiki page for review. As we mentioned in the
previous section, we need to make sure that we write the files to both
the working index and the repository (using the Rugged library <code>write</code>
call). Then we can generate a Review file which details all the images
uploaded.</p>
</div>
</div>
<div class="sect2">
<h3 id="_optimizing_for_image_storage">Optimizing for Image Storage</h3>
<div class="paragraph">
<p>If a designer uploads the same image twice, what happens? Our code
writes the uploaded image to a path on disk that is based on
the parent SHA hash of the repository (and this means we will always
write the file to a different path, even when the file is the same as
a previous uploaded file). It would look, to
an untrained eye, that we are adding the file file multiple times.
However, the nature of Git permits us to add the same file
multiple times without incurring any additional storage cost beyond
the first addition (and the minimal cost of a tree structure). When a file is added to git repository, an SHA hash
is generated from the file contents. For example, generating the SHA hash
from an empty file will always return the same SHA hash <span class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnote_1" title="View footnote.">1</a>]</span></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ echo -en "blob 0\0" | shasum
e69de29bb2d1d6434b8b29ae775ad8c2e48c5391
$ printf '' | git hash-object -w --stdin
e69de29bb2d1d6434b8b29ae775ad8c2e48c5391</code></pre>
</div>
</div>
<div class="paragraph">
<p>Adding a zip file with a bunch of files where only one
or two differs from the prior zip file means that Git will properly
reference the same file multiple times. Unfortunately, GitHub does not provide
an interface for reviewing statistics of Wikis in the same way that
they do for regular repositories. We can, however, review our
repository size from within the local repository by running the
count-objects Git subcommand. As an example, I uploaded a ZIP file
with two images inside of it. I then use the
count-objects command and see this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ git gc
...
$ git count-objects -v
count: 0
size: 0
in-pack: 11
packs: 1
size-pack: 2029
prune-packable: 0
garbage: 0
size-garbage: 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Inspecting the first ZIP file, I see these statistics about it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ unzip -l ~/Downloads/Photos\ \(4\).zip
Archive:  /Users/xrdawson/Downloads/Photos (4).zip
  Length     Date   Time    Name
 --------    ----   ----    ----
  1189130  01-01-12 00:00   IMG_20130704_151522.jpg
   889061  01-01-12 00:00   IMG_20130704_174217.jpg
 --------                   -------
  2078191                   2 files</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, let&#8217;s use another ZIP file, with the same two files present but
now with an additional image file added.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">unzip -l ~/Downloads/Photos\ \(5\).zip
Archive:  /Users/xrdawson/Downloads/Photos (5).zip
  Length     Date   Time    Name
 --------    ----   ----    ----
  1189130  01-01-12 00:00   IMG_20130704_151522.jpg
   566713  01-01-12 00:00   IMG_20120825_164703.jpg
   889061  01-01-12 00:00   IMG_20130704_174217.jpg
 --------                   -------
  2644904                   3 files</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, I upload the second ZIP file. If I re-run the count-object
command (after running <code>git gc</code>, a command which packs files
efficiently and makes our output more human readable), I see this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ git gc
...
$ git count-objects -v
count: 0
size: 0
in-pack: 17
packs: 1
size-pack: 2578
prune-packable: 0
garbage: 0
size-garbage: 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that our packed size has only changed by about half a MB, which
is the compressed size of the additional third file, but more
importantly, there was no impact from the other two files on our
repository size, even though they were added at different paths.</p>
</div>
<div class="paragraph">
<p>If we upload the secondary file yet again, we will regenerate and
commit a new version of the <code>Review.md</code> file, but no new files will
need to be created inside our Git repository object store from the
images directory (even though their paths have changed), so our
impact on the repository will be minimal.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ git gc
...
$ git count-objects -v
count: 0
size: 0
in-pack: 21
packs: 1
size-pack: 2578
prune-packable: 0
garbage: 0
size-garbage: 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see, our packed-size has barely changed, an indication that
the only changes were a new Git tree object and commit object. We
still do have the files located in our repository at a variety of
paths so our review pages will work no matter what revision we are accessing.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ find images
images
images/7507409915d00ad33d03c78af0a4004797eec4b4
images/7507409915d00ad33d03c78af0a4004797eec4b4/IMG_20120825_164703.jpg
images/7507409915d00ad33d03c78af0a4004797eec4b4/IMG_20130704_151522.jpg
images/7507409915d00ad33d03c78af0a4004797eec4b4/IMG_20130704_174217.jpg
images/7f9505a4bafe8c8f654e22ea3fd4dab8b4075f75
images/7f9505a4bafe8c8f654e22ea3fd4dab8b4075f75/IMG_20120825_164703.jpg
images/7f9505a4bafe8c8f654e22ea3fd4dab8b4075f75/IMG_20130704_151522.jpg
images/7f9505a4bafe8c8f654e22ea3fd4dab8b4075f75/IMG_20130704_174217.jpg
images/b4be28e5b24bfa46c4942d756a3a07efd24bc234
images/b4be28e5b24bfa46c4942d756a3a07efd24bc234/IMG_20130704_151522.jpg
images/b4be28e5b24bfa46c4942d756a3a07efd24bc234/IMG_20130704_174217.jpg</code></pre>
</div>
</div>
<div class="paragraph">
<p>Git and Gollum can efficiently store the same file at different paths
without overloading the repository.</p>
</div>
</div>
<div class="sect2">
<h3 id="_reviewing_on_github">Reviewing on GitHub</h3>
<div class="paragraph">
<p>The raison d&#8217;etre for this wiki is to annotate a development project.
If you follow the instructions above and create a new wiki for a
repository, you&#8217;ll then be able to push up the changes we&#8217;ve made
using our <code>image.rb</code> script. Once you have created a new wiki, look
for a box on the right which says "Clone this wiki locally".</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/gollum-local-clone-url.png" alt="Gollum git clone URL">
</div>
</div>
<div class="paragraph">
<p>Copy that link, and then enter a terminal window where we can then add a remote
URL to our local repository which allows us to synchronize our
repositories and publish our images into GitHub. Gollum wikis have a
simple URL structure based on the original clone URL: just add the
word <code>.wiki</code> to the end of the clone URL (but before the final <code>.git</code>
extension). So, if our original clone URL of the repository is
<code>git@github.com:xrd/webiphany.com.git</code> our clone URL for the
associated wiki will be <code>git@github.com:xrd/webiphany.com.wiki.git</code>.
Once we have the URL, we can add it as a remote to our local
repository using the following commands.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ git remote add origin git@github.com:xrd/webiphany.com.wiki.git
$ git pull # This will require us to merge the changes...
$ git push</code></pre>
</div>
</div>
<div class="paragraph">
<p>When we pull, we will be asked to merge our changes since GitHub
created a <code>Home.md</code> file which did not exist in our local repository.
We can just accept the merge as-is. The <code>git push</code> publishes our
changes. If we then visit the wiki, we&#8217;ll see an additional file
listed under the pages sidebar to the right. Clicking on the review
page, we can see the images we&#8217;ve added most recently.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/gollum-android-project1-review.png" alt="Images displayed within a Gollum wiki">
</div>
</div>
<div class="paragraph">
<p>Not sure why our designer is providing us with an image of a couch,
but I am sure he has his reasons.</p>
</div>
<div class="paragraph">
<p>Once you have published the file, we can click on the "Review" link in the
sidebar to see the most current version of the "Review" page. We also
can review the revisions of this file by clicking on the "3 Commits"
(or whatever number of commits have occurred with this file).
link right underneath the page title. Jumping onto that page shows us
the full history of this file.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/gollum-android-project1-revisions.png" alt="A view on the revisions from within GitHub">
</div>
</div>
<div class="paragraph">
<p>Clicking on any of the SHA hashes will display the page at that
revision in our history and show us the state of the document at any given
moment in history. Unfortunately, jumping back and forth between
revisions requires two clicks, one from the review page to the list of
revisions, and then another click to jump into the revision we want,
but this permits us to review changes between the comps provided from
our designer.</p>
</div>
<div class="paragraph">
<p>It would be nice if GitHub provided a simple way to jump
from a revision to the parent (older) revision, but they don&#8217;t expose
this in their site as of this writing. We can fix this, however, by generating
our own special link inside the review page itself which will
magically know about how to navigate to a previous version of the page.</p>
</div>
</div>
<div class="sect2">
<h3 id="_improving_revision_navigation">Improving Revision Navigation</h3>
<div class="paragraph">
<p>In our example, we only have three revisions right now, and all share the same commit
message ("Adding new images"). This is not very descriptive and makes
it challenging to understand the differences between revisions,
critical when we are trying to understand how things have changed
between comps. We can improve this easily.</p>
</div>
<div class="paragraph">
<p>First, let&#8217;s add a commit message field to our upload form.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;html&gt;
&lt;body&gt;
&lt;!-- message --&gt;
&lt;form method='POST' enctype='multipart/form-data' action='/unpack'&gt;
Choose a zip file:
&lt;input type='file' name='zip'/&gt;
&lt;input type='text' name='message' placeholder='Enter commit message'/&gt;
&lt;input type='submit' name='submit'&gt;
&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, let&#8217;s adjust the commit message inside our <code>image.rb</code> script,
which is a one line change to the options hash, setting the value of
it to the parameter we are now passing in for "commit".</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">  ...
options[:committer] = { :email =&gt; @email, :name =&gt; @name, :time =&gt; Time.now }
options[:message] = params[:message]
options[:parents] = @repo.empty? ? [] : [ @repo.head.target ].compact
  ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, if our designer posts a new version of the UI comps, they can
specify what changes were made, and we have a record of that in our
change log, exposed on the revisions section of our wiki hosted on GitHub.</p>
</div>
</div>
<div class="sect2">
<h3 id="_fixing_linking_between_comp_pages">Fixing Linking Between Comp Pages</h3>
<div class="paragraph">
<p>We noted that there is no quick way to jump between comps once we are
inside a review revision. However, if you recall we used the parent
SHA hash to build out our image links. We can use this to build out a
navigation links inside our comp page when we are on a revision page while
viewing the history.</p>
</div>
<div class="paragraph">
<p>Again, it is a simple change: one line within the <code>write_review_file</code>
method. After the block which creates each link to the image files,
add a line which builds a link to the parent document
via its SHA hash using the parent SHA found in our Rugged object under
<code>@repo.head.target</code>. This link will allow us to navigate to prior
revisions in our history.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">  ...
files.each do |f|
  contents += "### #{f} \n[[#{dir}/#{f}]]\n\n"
end
contents += "[Prior revision (only when viewing history)](#{@repo.head.target})\n\n"

File.write review_filename, contents
oid = @repo.write( contents, :blob )
  ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, when we view the Review file history, we see a link to each prior
version. Is it possible to provide a link to the next version in our
history? Unfortunately, we have no way to predict the SHA hash of the
next commit made to the repository, so we cannot build this link
inside our <code>Review.md</code> file with our ruby script. However, we do get
something just as good for free because we can simply use the back
button to jump back to the prior page in the history stack of our
browser. We might try to get clever
and use a link with JavaScript to call "window.history.back()" but
Gollum will foil this attempt by stripping JavaScript from rendered
markup files. This is generally is a good thing, as we don&#8217;t want to
permit rogue markup inside our wiki pages, but it does limit our
options in this situation.</p>
</div>
<div class="paragraph">
<p>Unfortunately, these links do not work when you are viewing the review file itself
(clicking on them brings you to a page which asks you to create this
as a new page). Gollum, unlike Jekyll, does not support Liquid
tags which would permit building a link using the username and
repository. Right now we don&#8217;t have access to these variables, so our
link needs to be relative, which works when we are in history review,
but not in the normal review. It does not affect viewing the files so
this would require educating your stakeholders on the limitations of
this link.</p>
</div>
</div>
<div class="sect2">
<h3 id="_summary">Summary</h3>
<div class="paragraph">
<p>In this chapter we learned how to create a Gollum wiki from
scratch, both on GitHub and as a fresh repository from the comman
line. We then looked at the different ways to use the <code>gollum</code> command
line tool and learned why this is a nice option when we want to run
our own Gollum server. Finally, we built a customized Gollum
image-centric editor using the Rugged and Sinatra Ruby libraries.</p>
</div>
<div class="paragraph">
<p>In the next chapter we&#8217;ll switch gears completely, and build a GUI
application for searching GitHub issues. And we&#8217;ll do it in Python.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnote_1">
<a href="#_footnoteref_1">1</a>. This is explained beautifully in the blog <a href="http://alblue.bandlem.com/2011/08/git-tip-of-week-objects.html" class="bare">http://alblue.bandlem.com/2011/08/git-tip-of-week-objects.html</a>.
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2018-10-11 12:24:13 PDT
</div>

<div onclick="openCustomization()" class="fab-left">☃</div>

<div class="loginWrapper">
  <div style="display: none" class="fab-left">👽</div>
  <div onclick="loginToGithub()" style="display: none" class="login">First, login!</div>
</div>

<div onclick="showLogin()" class="fab">✏️</div>

<div class="modal micromodal-slide" id="modal-1" aria-hidden="true">
  <div class="modal__overlay" tabindex="-1" data-micromodal-close>
    <div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="modal-1-title">
      <header class="modal__header">
	<h2 class="modal__title" id="modal-1-title">
	  Add a comment or change request
	</h2>
	<button class="modal__close" aria-label="Close modal" data-micromodal-close></button>
      </header>
      <main class="modal__content" id="modal-1-content">
	Add a comment or change to this text
	<p id="selectedText">
	</p>

	<input name="change" type="text" placeholder="Enter your comment or edit request..."/>
      </main>
      <footer class="modal__footer">
	<button onclick="storeIt()" class="modal__btn modal__btn-primary">Store comment</button>
	<button class="modal__btn" data-micromodal-close aria-label="Close this dialog window">Close</button>
      </footer>
    </div>
  </div>
</div>

<div class="modal micromodal-slide" id="modal-2" aria-hidden="true">
  <div class="modal__overlay" tabindex="-1" data-micromodal-close>
    <div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="modal-2-title">
      <header class="modal__header">
	<h2 class="modal__title" id="modal-2-title">
	  Customize this book for you.
	</h2>
	<button class="modal__close" aria-label="Close modal" data-micromodal-close></button>
      </header>
      <main class="modal__content" id="modal-2-content">

	<div  class="customization">
	  <input type="checkbox" name="checkbox" id="checkbox_id" value="value">
	  <label for="checkbox_id">Minimize callouts</label>
	  <div class="explanation">If a chapter contains callouts with code, don't show those.
	    You can display these individually by clicking the summary text when needed.
	  </div>
	</div>

	<div class="customization">
	  <input type="checkbox" name="checkbox" id="checkbox_id2" value="value">
	  <label for="checkbox_id2">Minimize setup instructions</label>
	  <div class="explanation">If a chapter contains setup instructions, don't show those.
	    You can display these individually by clicking the summary text when needed.
	  </div>
	</div>

	<div class="customization">
	  <input type="checkbox" name="checkbox" id="checkbox_id3" value="value">
	  <label for="checkbox_id3">Show quizes</label>
	  <div class="explanation">
	    At certain points in the discussion, present quizes which test your knowledge!
	  </div>
	</div>

	<div class="customization">
	  <input type="checkbox" name="checkbox" id="checkbox_id4" value="value">
	  <label for="checkbox_id4">Show mistakes</label>
	  <div class="explanation">
	    At times the author may have made mistakes in writing the code. You can read about the techniques
	    used to figure out something was wrong, or only see the final solution.
	  </div>
	</div>

      </main>
      <footer class="modal__footer">
	<button  class="modal__btn modal__btn-primary">Save Customizations</button>
	<button class="modal__btn" data-micromodal-close aria-label="Close this dialog window">Close</button>
      </footer>
    </div>
  </div>
</div>

<div id="filedIssue">
  Thanks for your contribution!
  <div id="issueUrl"></div>.
  You've been tagged on it, so you will get updates automatically.
</div>
</div>
</body>
</html>